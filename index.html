<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<script src='https://d3js.org/d3.v5.min.js'></script>
<head>
    <title>Dow Jones Historical Data</title>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
    <style type="text/css">
        html, body {
            margin: 0;
            padding: 0;
        }

        body {
            color: #292929;
            font: 90% Roboto, Arial, sans-serif;
            font-weight: 300;
            width:1200px;
        }

        p {
            padding: 0 10px;
            line-height: 1.8;
        }

        ul li {
            padding-right: 10px;
            line-height: 1.6;
        }

        h3 {
            padding: 5px 20px;
            margin: 0;
        }

        div#header {
            position: relative;
        }

        div#header h1 {
            height: 80px;
            line-height: 80px;
            margin: 0;
            padding-left: 10px;
            background: #e0e0e0;
            color: #292929;
        }

        div#header a {
            position: absolute;
            right: 0;
            top: 23px;
            padding: 10px;
            color: #006;
        }

        div#navigation {
            background: white;
        }

        div#navigation li {
            list-style: none;
        }

        div#extra {
            background:white;
        }

        div#footer {
            background: #42444e;
            color: #fff;
        }

        div#footer p {
            padding: 20px 10px;
        }

        div#wrapper {
            float: left;
            width: 100%;
        }

        div#content {
            margin-left: 200px;
        }

        div#navigation {
            float: left;
            width: 200px;
            margin-left: -100%;
        }

        div#extra {
            clear: left;
            width: 100%;
        }
        .line {
          fill: none;
          stroke: steelblue;
          stroke-width: 2px;
        }
    </style>

</head>
<body>
<div id="container">
    <div id="header">
        <h1>Dow Jones Historical Index 1915-2021</h1>
    </div>
    <div id="wrapper">
        <div id="content">
            <p><strong>1. Main Content</strong></p>
            <h3>The Ultimate Guide to Flexbox </h3>
            <p>The Flex Layout module is new layout module in CSS3 made to improve the items align, directions and order
                in the container even when they are with dynamic or even unknown size. The prime characteristic of the
                flex container is the ability to modify the width or height of its children to fill the available space
                in the best possible way on different screen sizes.
            </p>
            <p>Flexbox is relatively new, but it enjoys excellent browser support today (nearly 83% of browsers support
                Flexbox). Flexbox Layout is used for small application components, whereas CSS Grid Layout Module is
                aimed to handle the large scale layouts.
            </p>

        </div>
    </div>
    <div id="navigation">
        <p><strong>Historical Events</strong></p>

        <ul>
            <button onClick="clickFunction()">World War I</button>
            <button>Great Depression</button>
            <button>World War II</button>
            <button>Dot-com Bubble</button>
            <button>2008 Depression</button>
        </ul>
    </div>
    <div id="extra">
        <p><strong>Timeline Overview</strong></p>
        <svg id="overview" width=1000 height=300>
          </svg>
    </div>
</div>
<script type="text/javascript">AddFillerLink("content", "navigation", "extra")</script>
<body onload='init()'>
<script>

    var parseTime = d3.timeParse("%Y-%m-%d");
    var margin = {top: 20, right: 20, bottom: 50, left: 70},
        width = 960 - margin.left - margin.right,
        height = 200 - margin.top - margin.bottom;
    var x = d3.scaleTime().range([0, width]);
    var y = d3.scaleLinear().range([height, 0]);

    function clickFunction() {
      console.log("button has been clicked")
    }
    function init() {

      // define the line
      var valueline = d3.line()
          .x(function(d) { return x(d.date); })
          .y(function(d) { return y(d.real); });

      // append the svg obgect to the body of the page
      // appends a 'group' element to 'svg'
      // moves the 'group' element to the top left margin
      var svg = d3.select("#overview")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");

      // Get the data
      d3.csv("https://raw.githubusercontent.com/charleyarby/charleyarby.github.io/main/DJIA_Monthly_Data.csv")
      .then(function(data) {

        // format the data
        data.forEach(function(d) {
            d.date = parseTime(d.date);
            d.real = +d.real;
        });
      console.log(data)
        // Scale the range of the data
        x.domain(d3.extent(data, function(d) { return d.date; }));
        y.domain([0, d3.max(data, function(d) { return d.real; })]);

        // Add the valueline path.
        svg.append("path")
            .data([data])
            .attr("class", "line")
            .attr("d", valueline);

        // Add the x Axis
        svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x));

        // Add the y Axis
        svg.append("g")
            .call(d3.axisLeft(y));

      });
    }
</script>
</body>
</html>
